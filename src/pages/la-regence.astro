---
import SidebarLayout from "../layouts/SidebarLayout.astro";

const title = "La Régence — Le Bar, Le Restaurant, La Terrasse";
const description = "Présentation du Bar & Restaurant La Régence à Mont-de-Marsan.";
---

<SidebarLayout {title} {description} active="la-regence">
  <!-- Conteneur général sur la hauteur de l'écran -->
<section
  class="h-screen w-full bg-[var(--color-bg)]
           px-4 sm:px-6 md:px-8"
>
    <!-- Wrapper principal : relatif + plein écran -->
    <div class="relative w-full h-full">

      <!-- BARRE D’ONGLETS : fixe visuellement sur desktop, normale sur mobile -->
      <div
        class="w-full md:w-1/2 pr-0 md:pr-10 mb-4
               md:absolute md:top-4 md:left-0 md:z-30"
      >
        <nav class="bg-[var(--color-bg)]/95 md:inline-block px-4 py-2 rounded-xl">
          <ul
            class="flex justify-center md:justify-start gap-4 md:gap-6
                   font-limelight text-xl md:text-2xl tracking-wide text-brand"
          >
            <li>
              <a
                href="#bar"
                class="tab-link text-brand hover:text-[var(--color-copper)] transition"
                data-tab="bar"
              >
                Le Bar
              </a>
            </li>
            <li>
              <a
                href="#restaurant"
                class="tab-link text-brand hover:text-[var(--color-copper)] transition"
                data-tab="restaurant"
              >
                Le Restaurant
              </a>
            </li>
            <li>
              <a
                href="#terrasse"
                class="tab-link text-brand hover:text-[var(--color-copper)] transition"
                data-tab="terrasse"
              >
                La Terrasse
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- CONTENEUR SCROLLABLE + SNAP POUR LES 3 PAGES -->
      <div
        class="h-full md:overflow-y-scroll md:snap-y md:snap-mandatory"
      >
        <!-- ====== PAGE 1 : LE BAR ====== -->
<section
  id="bar"
  class="md:snap-start md:h-full flex items-stretch relative"
>
  <!-- Rectangle VERT full hauteur de la page -->
  <div
    aria-hidden="true"
    class="hidden md:block absolute top-0 bottom-0 right-[4vw]
           w-[min(28vw,500px)] min-w-[300px] bg-brand"
  ></div>

 <div class="w-full flex flex-col md:flex-row md:h-full relative z-10 py-6 md:py-8">
    <!-- COLONNE GAUCHE (texte) -->
    <div
      class="md:w-1/2 flex flex-col justify-start pt-8 md:pt-24 pr-10"
    >
      <h2
        class="font-limelight text-3xl md:text-4xl text-[var(--color-bg)]
               drop-shadow-[0_0_6px_rgba(0,0,0,0.6)]"
      >
        Le Bar
      </h2>

      <div class="mt-4 text-slate-800 leading-relaxed text-lg">
        <p>
          Signature cocktails, sélection de bières pression et une carte courte, fraîche et conviviale.
        </p>
        <p class="mt-3">
          Bois, lumière douce, bar central — un lieu vivant du matin au soir.
        </p>
      </div>
    </div>

    <!-- COLONNE DROITE (images) -->
<div class="md:w-1/2 flex items-start gap-4 pr-[3vw]">
  <!-- GRANDE IMAGE : 65% -->
  <figure class="rounded-2xl soft-border overflow-hidden w-[65%]">
    <img
      src="/regence-bar-grande.jpg"
      alt="Le Bar — grande photo"
      class="h-[90vh] w-full object-cover object-center"
    />
  </figure>

  <!-- COLONNE PETITES IMAGES -->
  <div class="hidden md:flex flex-col w-[35%]">
    <!-- PETITE IMAGE 1 -->
    <figure class="rounded-2xl soft-border overflow-hidden w-full">
      <img
        src="/regence-bar-petite.jpg"
        alt="Le Bar — photo secondaire"
        class="h-[40vh] w-full object-cover object-center"
      />
    </figure>

    <!-- ESPACE ÉGAL À gap-4 -->
    <div class="h-4"></div>

    <!-- PETITE IMAGE 2 -->
    <figure class="rounded-2xl soft-border overflow-hidden w-full">
      <img
        src="/regence-bar-petite-2.jpg"
        alt="Le Bar — troisième photo"
        class="h-[40vh] w-full object-cover object-center"
      />
    </figure>
  </div>
</div>

</section>

        <!-- ====== PAGE 2 : LE RESTAURANT ====== -->
        <section
          id="restaurant"
          class="md:snap-start md:min-h-full flex items-stretch py-6 md:py-8"
        >
          <div class="w-full flex flex-col md:flex-row md:h-full">
            <!-- COLONNE GAUCHE (texte, décalé sous la barre d’onglets) -->
            <div class="md:w-1/2 flex flex-col justify-start pt-8 md:pt-24 pr-10">
              <h2
                class="font-limelight text-3xl md:text-4xl text-[var(--color-bg)]
                       drop-shadow-[0_0_6px_rgba(0,0,0,0.6)]"
              >
                Le Restaurant
              </h2>
              <div class="mt-4 text-slate-800 leading-relaxed text-lg">
                <p>
                  Cuisine de brasserie soignée, produits frais, recettes faites maison, esprit généreux.
                </p>
                <p class="mt-3">
                  Service midi & soir, pour déjeuner, trinquer, prolonger la soirée.
                </p>
              </div>
            </div>

            <!-- COLONNE DROITE (images) -->
            <div class="md:w-1/2 flex flex-col gap-4 pr-[3vw]">
              <figure class="rounded-2xl soft-border overflow-hidden">
                <img
                  src="/regence-restaurant-grande.jpg"
                  alt="Le Restaurant — grande photo"
                  class="w-full h-[55vh] object-cover object-center"
                />
              </figure>

              <figure
                class="hidden md:block self-start rounded-2xl soft-border overflow-hidden"
              >
                <img
                  src="/regence-restaurant-petite.jpg"
                  alt="Le Restaurant — photo secondaire"
                  class="w-[min(22vw,420px)] min-w-[280px] h-[28vh] object-cover object-center"
                />
              </figure>
            </div>
          </div>
        </section>

        <!-- ====== PAGE 3 : LA TERRASSE ====== -->
<section
  id="terrasse"
  class="md:snap-start md:h-full flex items-stretch relative"
>
  <!-- Rectangle CUIVRE full hauteur de la page -->
  <div
    aria-hidden="true"
    class="hidden md:block absolute top-0 bottom-0 right-[4vw]
           w-[min(28vw,500px)] min-w-[300px] bg-[var(--color-copper)]"
  ></div>

  <div class="w-full flex flex-col md:flex-row md:h-full relative z-10 py-6 md:py-8">
    <!-- COLONNE GAUCHE (texte) -->
    <div class="md:w-1/2 flex flex-col justify-start pt-8 md:pt-24 pr-10">
      <h2
        class="font-limelight text-3xl md:text-4xl text-[var(--color-bg)]
               drop-shadow-[0_0_6px_rgba(0,0,0,0.6)]"
      >
        La Terrasse
      </h2>
      <div class="mt-4 text-slate-800 leading-relaxed text-lg">
        <p>
          Au calme, en plein centre : la terrasse pour vos cafés, déjeuners et apéritifs ensoleillés.
        </p>
        <p class="mt-3">
          Dès les beaux jours, service continu selon l’affluence.
        </p>
      </div>
    </div>

    <!-- COLONNE DROITE (images) -->
    <div class="md:w-1/2 flex flex-col gap-4 pr-[3vw]">
      <figure class="rounded-2xl soft-border overflow-hidden">
        <img
          src="/regence-terrasse-grande.jpg"
          alt="La Terrasse — grande photo"
          class="w-full h-[55vh] object-cover object-center"
        />
      </figure>

      <figure
        class="hidden md:block self-start rounded-2xl soft-border overflow-hidden"
      >
        <img
          src="/regence-terrasse-petite.jpg"
          alt="La Terrasse — photo secondaire"
          class="w-[min(22vw,420px)] min-w-[280px] h-[28vh] object-cover object-center"
        />
      </figure>
    </div>
  </div>
</section>

  <!-- Activation onglet courant + scroll align -->
  <script is:inline>
    (function () {
      const tabs = Array.from(document.querySelectorAll(".tab-link"));
      const ids = ["bar", "restaurant", "terrasse"];
      const secs = ids.map((id) => document.getElementById(id)).filter(Boolean);

      const setActive = (id) => {
        tabs.forEach((a) => {
          const active = a.dataset.tab === id;
          a.classList.toggle("text-[var(--color-copper)]", active);
          a.classList.toggle("text-brand", !active);
        });
      };

      const io = new IntersectionObserver(
        (entries) => {
          const vis = entries
            .filter((e) => e.isIntersecting)
            .sort((a, b) => b.intersectionRatio - a.intersectionRatio)[0];
          if (!vis) return;
          setActive(vis.target.id);
        },
        {
          root: null,
          rootMargin: "-45% 0px -45% 0px",
          threshold: [0.01, 0.1, 0.25, 0.5],
        }
      );

      secs.forEach((s) => io.observe(s));

      // clic onglet -> scroll doux jusqu’à la section
      tabs.forEach((a) => {
        a.addEventListener("click", (e) => {
          const target = document.getElementById(a.dataset.tab);
          if (!target) return;
          e.preventDefault();
          target.scrollIntoView({ behavior: "smooth", block: "start" });
          setActive(a.dataset.tab);
        });
      });
    })();
  </script>
</SidebarLayout>

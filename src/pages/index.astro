---
import SidebarLayout from "../layouts/SidebarLayout.astro";

const title = "La Régence — Bar-Brasserie à Mont-de-Marsan";
const description = "Bar Restaurant au cœur de Mont-de-Marsan. Cuisine inspirée brasserie, conviviale et soignée.";
---
<SidebarLayout {title} {description} noScroll={true} active="home">
  <!-- ========= SPLASH ========= -->
  <div
    id="splash"
    class="fixed inset-0 z-50 bg-brand text-[var(--color-bg)]
           flex flex-col items-center justify-center
           transform-gpu translate-y-0 transition-transform duration-[1800ms] ease-out"
  >
    <div class="absolute left-0 right-0" style="top:90%; height:3px; background:#a3742c;"></div>
    <div class="absolute w-full text-center text-sm opacity-80 flex flex-col items-center" style="top:92%;">
      <img src="/logo.png" alt="La Régence" class="w-6 h-6 mb-1 opacity-90" />
      <p>© La Régence 2025</p>
    </div>
    <!-- Contenu (Limelight + fade-in) -->
<div class="flex flex-col items-center gap-5 font-splash fade-in-contents">
  <img 
    src="/logo.png" 
    alt="La Régence" 
    class="w-60 h-60 md:w-72 md:h-72 lg:w-80 lg:h-80 object-contain" 
  />
  <p class="text-2xl md:text-3xl text-center">
    Bar-Brasserie à Mont-de-Marsan
  </p>
</div>

  </div>

  <!-- ========= CONTENU DROITE ========= -->
  <div id="page-wrap">
    <section class="w-full md:h-dvh px-4 xl:px-6 py-4 overflow-hidden">
  <!-- Grille : 2 colonnes sous xl aussi, pour que le texte reste à gauche -->
  <div class="grid grid-cols-[minmax(280px,1fr)_minmax(0,1fr)] gap-4 xl:gap-6">
    <!-- ====== TEXTE (sticky sous 1280 ET au-dessus) ====== -->
    <div class="min-h-0 flex">
      <div class="w-full max-w-prose md:max-w-xl mx-auto
           text-center md:text-right
           px-2 md:px-5
           flex flex-col justify-end
           pb-6 md:pb-8"
  >
      <div class="space-y-4">
        <h1 class="text-2xl sm:text-3xl md:text-3xl font-bold text-brand leading-tight">
          Bar Restaurant La Régence
        </h1>

        <p class="text-slate-700 italic text-base leading-snug">
          « Au cœur de Mont-de-Marsan, là où le Midou et la Douze se rejoignent pour former la Midouze… »
        </p>

        <p class="text-slate-700 leading-relaxed text-base">
          La Régence s’inscrit dans le quotidien des montois depuis 1988. En 2024, deux frères reprennent l’adresse
          et lui donnent un nouveau souffle, fidèle à l’esprit convivial qui l’a toujours animée.
        </p>

        <p class="text-slate-700 leading-relaxed text-base">
          La cuisine, inspirée de la tradition brasserie, se veut généreuse et accessible, préparée avec soin à partir
          de produits frais et de recettes travaillées sur place. Dans un décor chaleureux — bois, lumière douce et
          touches végétales — La Régence est pensée comme un lieu de vie où l’on se retrouve pour déjeuner, trinquer
          ou prolonger la soirée.
        </p>

        <p class="text-slate-700">
          <a href="tel:+33558859272" class="underline">Réservez votre table au 05&nbsp;58&nbsp;85&nbsp;92&nbsp;72</a>
        </p>
        </div>
      </div>
    </div>

    <!-- ====== IMAGES ====== -->
    <div class="min-h-0 md:min-w-0 md:overflow-hidden">
  <!-- De md à < xl : 1 colonne (grande puis les 2 autres, même largeur/hauteur) -->
  <!-- En ≥ xl : ton layout 2/3 + 1/3 d'origine -->
  <div class="hidden md:grid md:gap-6 md:min-w-0 md:auto-rows-auto
              md:grid-cols-1 xl:grid-cols-3 xl:grid-rows-10 md:h-full">

    <!-- Grande image -->
    <div class="xl:col-span-2 xl:row-span-10 rounded-2xl soft-border overflow-hidden">
      <img src="/grande.jpg"
           alt="La Régence — grande image"
           class="w-full md:h-[60vh] xl:h-full object-cover" />
    </div>

    <!-- (espace haut seulement en ≥ xl) -->
    <div class="hidden xl:block xl:col-span-1 xl:row-span-2"></div>

    <!-- Menu du jour -->
    <div
      class="relative group cursor-pointer rounded-2xl soft-border overflow-hidden
             xl:col-span-1 xl:row-span-4"
      id="menu-du-jour-thumb"
    >
      <img
        src="/menu-du-jour.png"
        alt="Menu du jour"
        class="w-full md:h-[70vh] xl:h-full object-cover transition duration-300 group-hover:scale-105"
      />
      <!-- badge visible seulement en ≥ xl -->
      <div class="hidden xl:flex absolute inset-0 items-center justify-center pointer-events-none">
        <span class="text-white text-base md:text-lg font-bold bg-black/45 px-3 py-1.5 rounded">Menu du jour</span>
      </div>
    </div>

    <!-- Petite image 2 -->
    <div class="rounded-2xl soft-border overflow-hidden xl:col-span-1 xl:row-span-4">
      <img src="/petite2.jpg"
           alt="La Régence — image secondaire"
           class="w-full md:h-[70vh] xl:h-full object-cover" />
    </div>
  </div>

      <!-- === Version < 1280px : grande native, les 2 autres matchent sa hauteur === -->
<div class="xl:hidden flex flex-col gap-4">
  <!-- grande.jpg : NATIF (pas de ratio imposé) -->
  <div id="g-wrap" class="rounded-2xl soft-border overflow-hidden">
    <img
      id="g-img"
      src="/grande.jpg"
      alt="La Régence — grande image"
      class="block w-full h-auto object-contain"
      loading="eager"
      decoding="async"
    />
  </div>

<!-- menu-du-jour : même HAUTEUR que grande, recadré si besoin (mobile) -->
<div
  class="rounded-2xl soft-border overflow-hidden js-menu-thumb cursor-pointer"
  data-img="/menu-du-jour.jpg"
>
  <div id="match-size-1" class="w-full">
    <img
      src="/menu-du-jour.jpg"
      alt="Menu du jour"
      class="w-full h-full object-cover object-center"
    />
  </div>
</div>



  <!-- petite2 : même HAUTEUR que grande, recadré si besoin -->
  <div class="rounded-2xl soft-border overflow-hidden">
    <div id="match-size-2" class="w-full">
      <img
        src="/petite2.jpg"
        alt="La Régence — image secondaire"
        class="w-full h-full object-cover object-center"
      />
    </div>
  </div>
</div>

    </div>
  </div>
</section>


    <!-- LIGHTBOX (commune mobile/desktop) -->
    <div id="menu-du-jour-lightbox" class="fixed inset-0 hidden items-center justify-center z-[60]" aria-hidden="true">
      <div id="lb-backdrop" class="absolute inset-0 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-300"></div>
      <div id="lb-figure" class="relative opacity-0 scale-95 translate-y-2 transition-all duration-300 will-change-transform will-change-opacity">
        <img
          id="lb-img"
          src="/menu-du-jour.jpg"
          alt="Menu du jour"
          class="max-w-[90vw] max-h-[85vh] rounded-2xl shadow-xl transition-transform duration-300"
          style="filter:none !important;"
        />
      </div>
    </div>
  </div>

  <!-- ========= Scripts ========= -->
  <script is:inline>
    // Splash
    (function () {
      const s = document.getElementById('splash');
      if (!s) return;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const go = () => {
        if (prefersReduced) { s.remove(); return; }
        s.classList.add('slide-up-out');
        s.addEventListener('transitionend', () => s.remove(), { once: true });
      };
      window.addEventListener('load', () => setTimeout(go, 1500));
    })();

    // Lightbox (multi-vignettes)
    (function () {
      const thumbs   = Array.from(document.querySelectorAll(".js-menu-thumb"));
      const lightbox = document.getElementById("menu-du-jour-lightbox");
      const backdrop = document.getElementById("lb-backdrop");
      const figure   = document.getElementById("lb-figure");
      const img      = document.getElementById("lb-img");
      if (!thumbs.length || !lightbox || !backdrop || !figure || !img) return;

      function openLB(src) {
        if (src) img.src = src;
        lightbox.classList.remove("hidden");
        lightbox.classList.add("flex");
        img.style.filter = "none";
        img.style.webkitFilter = "none";
        requestAnimationFrame(() => {
          backdrop.classList.add("opacity-100");
          figure.classList.remove("opacity-0", "scale-95", "translate-y-1");
          figure.classList.add("opacity-100", "scale-100", "translate-y-0");
        });
      }

      function closeLB() {
        figure.classList.add("opacity-0", "scale-95", "translate-y-1");
        figure.classList.remove("opacity-100", "scale-100", "translate-y-0");
        backdrop.classList.remove("opacity-100");
        setTimeout(() => {
          lightbox.classList.add("hidden");
          lightbox.classList.remove("flex");
        }, 300);
      }

      thumbs.forEach(t => {
        t.addEventListener("click", () => openLB(t.dataset.img || "/menu-du-jour.jpg"));
      });

      lightbox.addEventListener("click", (e) => {
        if (e.target === img) return;
        closeLB();
      });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !lightbox.classList.contains("hidden")) closeLB();
      });
    })();
    (function () {
  // On ne travaille que sous 1280px
  const mq = window.matchMedia('(max-width: 1279px)');

  // grande.jpg (doit avoir id="g-img")
  const gImg = document.getElementById('g-img');

  // Les deux conteneurs à mettre à la même hauteur que grande.jpg
  const matchEls = [
    document.getElementById('match-size-1'),
    document.getElementById('match-size-2'),
  ].filter(Boolean);

  if (!gImg || !matchEls.length) return;

  function syncHeights() {
    // Si on repasse au-dessus de 1280, on nettoie
    if (!mq.matches) {
      matchEls.forEach(el => { el.style.height = ''; });
      return;
    }
    // Hauteur rendue de grande.jpg
    const rect = gImg.getBoundingClientRect();
    if (rect.height > 0) {
      const h = rect.height + 'px';
      matchEls.forEach(el => { el.style.height = h; });
    }
  }

  // Quand grande.jpg charge / reload
  gImg.addEventListener('load', syncHeights);

  // Sur chargement & resize
  window.addEventListener('load', syncHeights);
  window.addEventListener('resize', syncHeights);

  // Petits recalages pour couvrir les reflows tardifs
  setTimeout(syncHeights, 50);
  setTimeout(syncHeights, 250);
})();
  </script>
</SidebarLayout>
